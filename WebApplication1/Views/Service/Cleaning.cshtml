@using Logic
@using Microsoft.AspNetCore.Http
@using Microsoft.CodeAnalysis.CSharp.Syntax
@model IEnumerable<CleaningServiceViewModel>;
@{
    ViewData["Title"] = "Cleaning";
}
<link href="~/css/Service.css" rel="stylesheet" />

<div>
    <div style="text-align:center;">
        <div style="display:inline-block; width:500px;">
            <table style="width:100%;">
                <tr class="R-Info-bar">
                    <th>Nr</th>
                    <th>Spoor</th>
                    <th>Soort Schoonmaak</th>
                    <th>Persoon</th>
                    <th>datum</th>
                    <col />
                </tr>
                @foreach (CleaningServiceViewModel Service in Model)
                {
                    <tr>
                        <td class="C-content C-content-thin">@Service.TramNumber</td><!--Nr-->
                        <td class="C-content C-content-thin">@Service.TrackNumber</td><!--Spoor-->
                        <td class="C-content C-content-wide">@Service.CleaningType</td><!--Soort-->
                        @{
                            if (Service.User != null)
                            {
                                                <form method="post" action="/Service/UpdateCleaningDoneStatus">
                                                    <td class="C-content C-content-wide" name="Username" value="@Service.User.UserName">@Service.User.UserName</td><!--Persoon-->
                                                    <td class="C-content C-content-wide" name="CleaningDate" value="@Service.CleaningDate">@Service.CleaningDate</td><!--datum-->
                                                    <input type="hidden" name="TramNumber" value="@Service.TramNumber" readonly />
                                                    <td class="C-Info-Status test"><input type="submit" name="Done" value="Done"></td>
                                                </form>
                            }
                            else
                            {
                    <form method="post" action="/Service/AssignUser">
                        @{
                            if (Context.Session.GetString("Permission") == "Admin")
                            {
                                <td class="C-content C-content-wide">
                                    <select name="Username">
                                        @foreach(UserViewModel user in Service.SchoonMakers)
                                        {
                                        <option value="@user.UserName">@user.UserName</option>
                                        }
                                    </select>
                                </td>
                                <!--Persoon-->
                            }
                            else
                            {
                                <td class="C-content C-content-wide" name="Username" value="@Context.Session.GetString("Username")">@Context.Session.GetString("Username")</td><!--Persoon-->
                            }
                            <td class="C-content C-content-wide">No date assigned</td><!--datum-->
                            <input type="hidden" name="TramNumber" value="@Service.TramNumber" readonly />
                            <td class="C-Info-Status test"><input type="submit" name="Assign" value="Assign"></td><!--Done-->
                        }
                    </form>

                            }
                        }

                    </tr>
                }
                @for (int i = 0; i < (10 - Model.Count()); i++)
                {
                    <tr>
                        <td class="C-content C-content-thin"></td><!--Nr-->
                        <td class="C-content C-content-thin"></td><!--Spoor-->
                        <td class="C-content C-content-wide"></td><!--Soort-->
                        <td class="C-content C-content-wide"></td><!--Persoon-->
                        <td class="C-content C-content-wide"></td><!--datum-->
                        <td class="C-Info-Status"></td><!--Status-->
                    </tr>
                }
            </table>
        </div>
    </div>
</div>

